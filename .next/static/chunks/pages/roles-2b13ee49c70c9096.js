(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[217],{20264:function(e,a,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/roles",function(){return l(77413)}])},77413:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return i}});var t=l(85893),r=l(67294),n=l(74),s=l(61851),o=l(66597),c=()=>{let[e,a]=(0,r.useState)([]),[l,c]=(0,r.useState)(!0),[i,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(!1),[b,h]=(0,r.useState)({id:0,name:""}),[x,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{c(!0),d(null);try{let e=await (0,o.F3)();a(e)}catch(e){d("Error al cargar los roles")}finally{c(!1)}})()},[]);let g=async()=>{if(x)try{let e=await (0,o.ul)(b.id,{name:b.name});a(a=>a.map(a=>a.id===e.id?e:a)),m(!1),h({id:0,name:""})}catch(e){d("Error al actualizar el rol")}else try{let e=await (0,o.fA)({name:b.name});a(a=>[...a,e]),m(!1),h({id:0,name:""})}catch(e){d("Error al crear el rol")}},N=async e=>{try{await (0,o.Rd)(e.id),a(a=>a.filter(a=>a.id!==e.id))}catch(e){d("Error al eliminar el rol")}};return(0,t.jsxs)("div",{className:"p-8 bg-gradient-to-b from-teal-100 to-green-100 min-h-screen",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-6 text-teal-600",children:"Mantenimiento de Roles"}),(0,t.jsx)("button",{onClick:()=>{f(!1),h({id:0,name:""}),m(!0)},className:"bg-teal-500 text-white py-2 px-4 rounded-full mb-4 hover:bg-teal-600",children:"Nuevo Rol"}),i&&(0,t.jsx)("p",{className:"text-red-500",children:i}),l?(0,t.jsx)("p",{className:"text-center text-gray-600",children:"Cargando roles..."}):(0,t.jsx)(n.Z,{columns:[{label:"ID",accessor:"id"},{label:"Nombre",accessor:"name"}],data:e,onEdit:e=>{f(!0),h({...e}),m(!0)},onDelete:N}),(0,t.jsxs)(s.Z,{isOpen:u,onClose:()=>m(!1),children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4",children:x?"Editar Rol":"Crear Nuevo Rol"}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-gray-700 mb-2",htmlFor:"name",children:"Nombre"}),(0,t.jsx)("input",{type:"text",id:"name",value:b.name,onChange:e=>h({...b,name:e.target.value}),className:"w-full p-4 border border-gray-300 rounded-lg text-black",placeholder:"Ingresa el nombre del rol"})]}),(0,t.jsx)("button",{onClick:g,className:"bg-teal-500 text-white py-2 px-4 rounded-full hover:bg-teal-600",children:x?"Guardar Cambios":"Crear Rol"}),(0,t.jsx)("button",{onClick:()=>m(!1),className:"ml-4 bg-gray-500 text-white py-2 px-4 rounded-full hover:bg-gray-600",children:"Cancelar"})]})]})},i=()=>(0,t.jsx)(c,{})}},function(e){e.O(0,[775,888,774,179],function(){return e(e.s=20264)}),_N_E=e.O()}]);