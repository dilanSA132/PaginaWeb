(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[290],{76543:function(e,r,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/userMaintenance",function(){return a(63528)}])},63528:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return d}});var t=a(85893),l=a(67294),o=a(74),s=a(61851),n=a(30989),i=a(66597),c=()=>{let[e,r]=(0,l.useState)([]),[a,c]=(0,l.useState)(!0),[d,u]=(0,l.useState)(null),[m,h]=(0,l.useState)(!1),[b,p]=(0,l.useState)({id:0,name:"",email:"",password:"",roleId:0}),[g,f]=(0,l.useState)(!1),[x,w]=(0,l.useState)([]);(0,l.useEffect)(()=>{(async()=>{c(!0),u(null);try{let e=await (0,n.Rf)();r(e)}catch(e){u("Error al cargar los usuarios")}finally{c(!1)}})()},[]),(0,l.useEffect)(()=>{(async()=>{c(!0),u(null);try{let e=await (0,i.F3)();w(e)}catch(e){u("Error al cargar los roles")}finally{c(!1)}})()},[]);let y=async()=>{if(!b.name||!b.email||!b.roleId){u("Por favor, completa todos los campos obligatorios.");return}if(!g&&!b.password){u("Por favor, ingresa una contrase\xf1a para el nuevo usuario.");return}if(console.log("Este es el  ",b),u(null),g)try{let e=await (0,n.Nq)(b.id,{name:b.name,email:b.email,roleId:b.roleId});r(r=>r.map(r=>r.id===e.id?e:r)),h(!1),p({id:0,name:"",email:"",password:"",roleId:0})}catch(e){u("Error al actualizar el usuario")}else try{let e=await (0,n.r4)({name:b.name,email:b.email,password:b.password,roleId:b.roleId});r(r=>[...r,e]),h(!1),p({id:0,name:"",email:"",password:"",roleId:0})}catch(e){u("Error al crear el usuario")}},j=async e=>{try{await (0,n.h8)(e.id),r(r=>r.filter(r=>r.id!==e.id))}catch(e){u("Error al eliminar el usuario")}};return(0,t.jsxs)("div",{className:"p-8 bg-gradient-to-b from-teal-100 to-green-100 min-h-screen",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-6 text-teal-600",children:"Usuarios"}),(0,t.jsx)("button",{onClick:()=>{f(!1),p({id:0,name:"",email:"",password:"",roleId:0}),h(!0)},className:"bg-teal-500 text-white py-2 px-4 rounded-full mb-4 hover:bg-teal-600",children:"Nuevo Usuario"}),(0,t.jsx)("label",{className:"text-black py-2 px-4 rounded-full mb-4 ",children:x.map(e=>(0,t.jsxs)("span",{className:"mr-2",children:[e.id,": ",e.name]},e.id))}),d&&(0,t.jsx)("p",{className:"text-red-500",children:d}),a?(0,t.jsx)("p",{className:"text-center text-gray-600",children:"Cargando usuarios..."}):(0,t.jsx)(o.Z,{columns:[{label:"ID",accessor:"id"},{label:"Nombre",accessor:"name"},{label:"Correo Electr\xf3nico",accessor:"email"},{label:"Rol",accessor:"roleId"}],data:e,onEdit:e=>{f(!0),p({...e}),h(!0)},onDelete:j}),(0,t.jsxs)(s.Z,{isOpen:m,onClose:()=>h(!1),children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4",children:g?"Editar Usuario":"Crear Nuevo Usuario"}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-gray-700 mb-2",htmlFor:"name",children:"Nombre"}),(0,t.jsx)("input",{type:"text",id:"name",value:b.name,onChange:e=>p({...b,name:e.target.value}),className:"w-full p-4 border border-gray-300 rounded-lg text-black",placeholder:"Ingresa el nombre"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-gray-700 mb-2",htmlFor:"email",children:"Correo Electr\xf3nico"}),(0,t.jsx)("input",{type:"email",id:"email",value:b.email,onChange:e=>p({...b,email:e.target.value}),className:"w-full p-4 border border-gray-300 rounded-lg text-black",placeholder:"Ingresa el correo electr\xf3nico"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-gray-700 mb-2",htmlFor:"roleId",children:"Rol"}),(0,t.jsx)("select",{id:"roleId",value:b.roleId,onChange:e=>p({...b,roleId:parseInt(e.target.value)}),className:"w-full p-4 border border-gray-300 rounded-lg text-black ",children:x.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))})]}),!g&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block text-gray-700 mb-2",htmlFor:"password",children:"Contrase\xf1a"}),(0,t.jsx)("input",{type:"password",id:"password",value:b.password||"",onChange:e=>p({...b,password:e.target.value}),className:"w-full p-4 border border-gray-300 rounded-lg text-black",placeholder:"Ingresa la contrase\xf1a"})]}),(0,t.jsx)("button",{onClick:y,className:"bg-teal-500 text-white py-2 px-4 rounded-full hover:bg-teal-600",children:g?"Guardar Cambios":"Crear Usuario"}),(0,t.jsx)("button",{onClick:()=>h(!1),className:"ml-4 bg-gray-500 text-white py-2 px-4 rounded-full hover:bg-gray-600",children:"Cancelar"})]})]})},d=()=>(0,t.jsx)(c,{})},30989:function(e,r,a){"use strict";a.d(r,{Nq:function(){return n},Rf:function(){return l},h8:function(){return s},r4:function(){return o}});let t=a(83454).env.NEXT_PUBLIC_API_URL||"http://localhost:3000/api/v1/users",l=async()=>{try{let e=await fetch(t,{method:"GET"});if(!e.ok){let r=await e.json();throw Error(r.message||"Error fetching users")}return await e.json()}catch(e){throw console.error("Error fetching users:",e),e}},o=async e=>{try{console.log("Este es el usuario ",e);let r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){let e=await r.json();throw Error(e.message||"Error creating user")}return await r.json()}catch(e){throw console.error("Error creating user:",e),e}},s=async e=>{try{let r=await fetch("".concat(t,"/").concat(e),{method:"DELETE"});if(!r.ok){let e=await r.json();throw Error(e.message||"Error deleting user")}return await r.json()}catch(e){throw console.error("Error deleting user:",e),e}},n=async(e,r)=>{try{let a=await fetch("".concat(t,"/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!a.ok){let e=await a.json();throw Error(e.message||"Error updating user")}return await a.json()}catch(e){throw console.error("Error updating user:",e),e}}}},function(e){e.O(0,[775,888,774,179],function(){return e(e.s=76543)}),_N_E=e.O()}]);